(this["webpackJsonptranslate-app"]=this["webpackJsonptranslate-app"]||[]).push([[0],{169:function(e,n,t){},170:function(e,n,t){"use strict";t.r(n);var a=t(7),c=t(0),r=t(23),s=t.n(r),l=t(52),i=t(51),o=t(37),u="defaults",d={hideTranslatedPanel:!1,hideTranslatedLocales:!1,visibleLang:"",locales:[]},p=Object(c.createContext)(Object(o.a)(Object(o.a)({},d),{},{langs:[],setConfig:function(){}})),h=function(e){var n=Object(c.useState)(d),t=Object(i.a)(n,2),r=t[0],s=t[1],h=r.locales.map((function(e){return e.filename}));return Object(a.jsx)(p.Provider,{value:Object(o.a)(Object(o.a)({},r),{},{langs:h.filter((function(e){return e!==u})),setConfig:function(e,n){s(Object(o.a)(Object(o.a)({},r),{},Object(l.a)({},e,n)))}}),children:e.children})};function j(){return Object(c.useContext)(p)}var f=function(e){var n=e.children;return Object(a.jsxs)("main",{children:[Object(a.jsx)("h1",{className:"py-4 text-center text-2xl",children:"\u5728\u7ebf\u7ffb\u8bd1"}),Object(a.jsx)(h,{children:Object(a.jsx)("div",{className:"app-container ",children:n})})]})},b=(t(171),t(95)),O=(t(75),t(46)),x=(t(106),t(74)),m=(t(172),t(68)),v=t(45),g=t.n(v),y=t(53),k=(t(110),t(96)),C=t(71),N=t.n(C);function w(e){return L.apply(this,arguments)}function L(){return(L=Object(y.a)(g.a.mark((function e(n){var t,a,c,r,s,l,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.loadAsync(n);case 3:t=e.sent,a=[],c=0,r=Object.keys(t.files);case 6:if(!(c<r.length)){e.next=18;break}if(s=r[c],(l=t.files[s]).dir||!l.name.endsWith(".json")){e.next=15;break}return e.next=12,l.async("string");case 12:i=e.sent,l.name.split("/").pop().replace(/\.json/,"").match(/^[a-zA-Z-]+$/)&&a.push({filename:l.name.split("/").pop().replace(/\.json/,""),content:i});case 15:c++,e.next=6;break;case 18:return e.abrupt("return",a);case 21:e.prev=21,e.t0=e.catch(0),console.error(e.t0),k.b.error("zip\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25");case 25:return e.abrupt("return",[]);case 26:case"end":return e.stop()}}),e,null,[[0,21]])})))).apply(this,arguments)}var z=function(e){var n=e.langs,t=e.onExport,r=Object(c.useRef)(null),s=j(),l=s.hideTranslatedPanel,i=s.hideTranslatedLocales,o=s.visibleLang,u=s.setConfig,d=s.locales,p=Object(c.useCallback)(function(){var e=Object(y.a)(g.a.mark((function e(n){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.file,e.next=3,w(t);case 3:a=e.sent,u("locales",a);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[u]);return Object(a.jsx)("div",{className:"fixed bottom-0 left-0 right-0",ref:r,children:Object(a.jsxs)("div",{className:"p-4 flex items-center app-container up-shadow",children:[Object(a.jsxs)("div",{className:"flex items-center mr-6",children:[Object(a.jsx)("label",{children:"\u663e\u793a\u7ffb\u8bd1\u8bed\u8a00\uff1a"}),Object(a.jsxs)(m.a,{value:o,onChange:function(e){return u("visibleLang",e)},style:{width:"120px"},getPopupContainer:function(){return r.current},children:[Object(a.jsx)(m.a.Option,{value:"",children:"\u5168\u90e8"}),n.map((function(e){return Object(a.jsx)(m.a.Option,{value:e,children:e},e)}))]})]}),Object(a.jsx)(x.a,{checked:l,onChange:function(e){return u("hideTranslatedPanel",e.target.checked)},children:"\u9690\u85cf\u5df2\u7ffb\u8bd1\u9762\u677f"}),Object(a.jsx)(x.a,{checked:i,onChange:function(e){return u("hideTranslatedLocales",e.target.checked)},children:"\u9690\u85cf\u5df2\u7ffb\u8bd1\u8bed\u8a00"}),d.length?Object(a.jsx)(O.a,{className:"ml-auto",type:"primary",onClick:t,children:"\u5bfc\u51fa"}):Object(a.jsx)(b.a,{className:"ml-auto",accept:".zip",beforeUpload:function(){return!1},showUploadList:!1,onChange:p,children:Object(a.jsx)(O.a,{type:"primary",children:"\u9009\u62e9zip\u6587\u4ef6\u4e0a\u4f20"})})]})})},T=(t(164),t(73)),P=function(e){var n=e.defaultValue,t=e.onChange,r=Object(c.useState)(!n),s=Object(i.a)(r,2),l=s[0],o=s[1],u=Object(c.useState)(null!==n&&void 0!==n?n:""),d=Object(i.a)(u,2),p=d[0],h=d[1],j=Object(c.useCallback)((function(e){h(e.target.value),null===t||void 0===t||t(e.target.value)}),[t]);return l?Object(a.jsx)("input",{className:"w-full border-b focus:border-blue-500 appearance-none focus:outline-none",value:p,onChange:j}):Object(a.jsx)("span",{onClick:function(){return o(!0)},children:n})},E=T.a.Panel,R=new Map;function S(e,n){return e.langs.every((function(t){return n&&t!==n||e.locales[t]}))}var J=function(e){var n=e.actionRef,t=j(),c=t.hideTranslatedPanel,r=t.hideTranslatedLocales,s=t.visibleLang,l=t.locales,i=t.langs;if(console.log("locales",l),!l.length)return Object(a.jsx)("p",{className:"text-blue-600 empty-content",children:"\u6682\u65e0\u56fd\u9645\u5316\u914d\u7f6e\uff0c\u8bf7\u4f7f\u7528\u5bfc\u5165\u6309\u94ae\u5bfc\u5165zip\u6587\u4ef6"});var o=l.find((function(e){return e.filename===u})),d={};try{d=JSON.parse(o.content)}catch(b){return console.error(b),Object(a.jsx)("p",{className:"text-red-600 empty-content",children:"\u89e3\u6790\u6e90\u6587\u4ef6\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u4e0a\u4f20\u7684zip\u6587\u4ef6\u662f\u5426\u6b63\u786e!"})}try{var p=l.reduce((function(e,n){return n.filename!==u&&(e[n.filename]=JSON.parse(n.content)),e}),{}),h=Object.keys(d).reduce((function(e,n){var t={description:d[n].description,hash:n,langs:i,locales:i.reduce((function(e,t){var a;return e[t]=null===(a=p[t][n])||void 0===a?void 0:a.defaultMessage,e}),{})};return c&&S(t,s)||e.push(t),e}),[]),f=h.reduce((function(e,n){return S(n)||e.push(n.hash),e}),[]);return n&&(n.current={exportZip:function(){R.forEach((function(e,n){p[n.lang][n.hash]||(p[n.lang][n.hash]={defaultMessage:"",description:d[n.hash].description}),p[n.lang][n.hash].defaultMessage=e})),function(e,n){var t=new N.a,a=t.folder("lang");e.forEach((function(e){var t=Object.keys(n[e]).sort((function(e,n){return e<n?-1:1})).reduce((function(t,a){return t[a]=n[e][a],t}),{});a.file("".concat(e,".json"),JSON.stringify(t,null,2))})),t.generateAsync({type:"blob"}).then((function(e){var n=document.createElement("a");n.download="translate.zip",n.style.display="none",n.href=URL.createObjectURL(e),document.body.appendChild(n),n.click(),document.body.removeChild(n)}))}(i,p)}}),Object(a.jsx)(T.a,{defaultActiveKey:f,children:h.map((function(e){return Object(a.jsx)(E,{header:e.description?"\u63cf\u8ff0\uff1a".concat(e.description):Object(a.jsx)("span",{className:"text-red-600 empty-content",children:"\u672a\u63d0\u4f9b\u63cf\u8ff0"}),children:Object(a.jsx)("div",{children:e.langs.map((function(n){return r&&e.locales[n]||s&&n!==s?null:Object(a.jsxs)("p",{className:"translate-item",children:[Object(a.jsxs)("span",{className:"translate-item-label",children:[n,":"]}),Object(a.jsx)("span",{className:"translate-item-value",children:Object(a.jsx)(P,{defaultValue:e.locales[n],onChange:function(t){return function(e,n,t){R.set({lang:n,hash:t},e)}(t,n,e.hash)}})})]},n)}))})},e.hash)}))})}catch(O){return console.error(O),Object(a.jsx)("p",{className:"text-red-600 empty-content",children:"\u89e3\u6790\u6587\u4ef6\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u4e0a\u4f20\u7684zip\u6587\u4ef6\u662f\u5426\u6b63\u786e!"})}},A=function(){var e=Object(c.useRef)(),n=j().langs;return Object(a.jsxs)("div",{style:{minHeight:"calc(100vh - 64px)",paddingBottom:"84px"},children:[Object(a.jsx)(J,{actionRef:e}),Object(a.jsx)(z,{langs:n,onExport:function(){e.current.exportZip()}})]})};t(168),t(169);s.a.render(Object(a.jsx)(f,{children:Object(a.jsx)(A,{})}),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.6447072a.chunk.js.map