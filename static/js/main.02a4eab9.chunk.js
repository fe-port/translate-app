(this["webpackJsonptranslate-app"]=this["webpackJsonptranslate-app"]||[]).push([[0],{169:function(e,n,t){},170:function(e,n,t){"use strict";t.r(n);var a=t(7),c=t(0),r=t(23),s=t.n(r),l=t(51),i=t(65),o=t(37),u="en-US",d={hideTranslatedPanel:!1,hideTranslatedLocales:!1,visibleLang:"",locales:[]},h=Object(c.createContext)(Object(o.a)(Object(o.a)({},d),{},{langs:[],noEnLangs:[],setConfig:function(){}})),j=function(e){var n=Object(c.useState)(d),t=Object(i.a)(n,2),r=t[0],s=t[1],j=r.locales.map((function(e){return e.filename}));return Object(a.jsx)(h.Provider,{value:Object(o.a)(Object(o.a)({},r),{},{langs:j,noEnLangs:j.filter((function(e){return e!==u})),setConfig:function(e,n){s(Object(o.a)(Object(o.a)({},r),{},Object(l.a)({},e,n)))}}),children:e.children})};function p(){return Object(c.useContext)(h)}var b=function(e){var n=e.children;return Object(a.jsxs)("main",{children:[Object(a.jsx)("h1",{className:"py-4 text-center text-2xl",children:"\u5728\u7ebf\u7ffb\u8bd1"}),Object(a.jsx)(j,{children:Object(a.jsx)("div",{className:"app-container ",children:n})})]})},f=(t(171),t(95)),O=(t(75),t(46)),x=(t(106),t(74)),m=(t(172),t(68)),v=t(45),g=t.n(v),y=t(52),N=(t(110),t(96)),k=t(71),C=t.n(k);function L(e){return w.apply(this,arguments)}function w(){return(w=Object(y.a)(g.a.mark((function e(n){var t,a,c,r,s,l,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.loadAsync(n);case 3:t=e.sent,a=[],c=0,r=Object.keys(t.files);case 6:if(!(c<r.length)){e.next=17;break}if(s=r[c],(l=t.files[s]).dir){e.next=14;break}return e.next=12,l.async("string");case 12:i=e.sent,a.push({filename:l.name.split("/").pop().replace(/\.json/,""),content:i});case 14:c++,e.next=6;break;case 17:return e.abrupt("return",a);case 20:e.prev=20,e.t0=e.catch(0),console.error(e.t0),N.b.error("zip\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25");case 24:return e.abrupt("return",[]);case 25:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}var E=function(e){var n=e.langs,t=e.onExport,r=Object(c.useRef)(null),s=p(),l=s.hideTranslatedPanel,i=s.hideTranslatedLocales,o=s.visibleLang,u=s.setConfig,d=s.locales,h=Object(c.useCallback)(function(){var e=Object(y.a)(g.a.mark((function e(n){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.file,e.next=3,L(t);case 3:a=e.sent,console.log(a.length),u("locales",a);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[u]);return Object(a.jsx)("div",{className:"fixed bottom-0 left-0 right-0",ref:r,children:Object(a.jsxs)("div",{className:"p-4 flex items-center app-container up-shadow",children:[Object(a.jsxs)("div",{className:"flex items-center mr-6",children:[Object(a.jsx)("label",{children:"\u663e\u793a\u7ffb\u8bd1\u8bed\u8a00\uff1a"}),Object(a.jsxs)(m.a,{value:o,onChange:function(e){return u("visibleLang",e)},style:{width:"120px"},getPopupContainer:function(){return r.current},children:[Object(a.jsx)(m.a.Option,{value:"",children:"\u5168\u90e8"}),n.map((function(e){return Object(a.jsx)(m.a.Option,{value:e,children:e},e)}))]})]}),Object(a.jsx)(x.a,{checked:l,onChange:function(e){return u("hideTranslatedPanel",e.target.checked)},children:"\u9690\u85cf\u5df2\u7ffb\u8bd1\u9762\u677f"}),Object(a.jsx)(x.a,{checked:i,onChange:function(e){return u("hideTranslatedLocales",e.target.checked)},children:"\u9690\u85cf\u5df2\u7ffb\u8bd1\u8bed\u8a00"}),d.length?Object(a.jsx)(O.a,{className:"ml-auto",type:"primary",onClick:t,children:"\u5bfc\u51fa"}):Object(a.jsx)(f.a,{className:"ml-auto",accept:".zip",beforeUpload:function(){return!1},showUploadList:!1,onChange:h,children:Object(a.jsx)(O.a,{type:"primary",children:"\u9009\u62e9zip\u6587\u4ef6\u4e0a\u4f20"})})]})})},T=(t(164),t(73)),z=function(e){var n=e.value,t=e.onChange,r=Object(c.useState)(!n),s=Object(i.a)(r,2),l=s[0],o=s[1],u=Object(c.useCallback)((function(e){null===t||void 0===t||t(e.target.value)}),[t]);return l?Object(a.jsx)("input",{className:"w-full border-b focus:border-blue-500 appearance-none focus:outline-none",value:n,onChange:u}):Object(a.jsx)("span",{onClick:function(){return o(!0)},children:n})},P=T.a.Panel,S=new Map;function R(e,n){return e.langs.every((function(t){return n&&t!==n||e.locales[t]}))}var U=function(e){var n=e.actionRef,t=p(),c=t.hideTranslatedPanel,r=t.hideTranslatedLocales,s=t.visibleLang,l=t.locales,i=t.langs,o=t.noEnLangs;if(console.log("locales",l),!l.length)return Object(a.jsx)("p",{className:"text-blue-600 empty-content",children:"\u6682\u65e0\u56fd\u9645\u5316\u914d\u7f6e\uff0c\u8bf7\u4f7f\u7528\u5bfc\u5165\u6309\u94ae\u5bfc\u5165zip\u6587\u4ef6"});var d=l.find((function(e){return e.filename===u})),h={};try{h=JSON.parse(d.content)}catch(O){return console.error(O),Object(a.jsx)("p",{className:"text-red-600 empty-content",children:"\u89e3\u6790\u82f1\u6587\u6e90\u6587\u4ef6\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u4e0a\u4f20\u7684zip\u6587\u4ef6\u662f\u5426\u6b63\u786e!"})}try{var j=l.reduce((function(e,n){return e[n.filename]=JSON.parse(n.content),e}),{}),b=Object.keys(h).reduce((function(e,n){var t={description:h[n].description,hash:n,langs:o,locales:i.reduce((function(e,t){var a;return e[t]=null===(a=j[t][n])||void 0===a?void 0:a.defaultMessage,e}),{})};return c&&R(t,s)||e.push(t),e}),[]),f=b.reduce((function(e,n){return R(n)||e.push(n.hash),e}),[]);return n&&(n.current={exportZip:function(){S.forEach((function(e,n){j[n.lang][n.hash]||(j[n.lang][n.hash]={defaultMessage:"",description:h[n.hash].description}),j[n.lang][n.hash].defaultMessage=e})),function(e,n){var t=new C.a,a=t.folder("lang");e.forEach((function(e){var t=Object.keys(n[e]).sort((function(e,n){return e<n?-1:1})).reduce((function(t,a){return t[a]=n[e][a],t}),{});a.file("".concat(e,".json"),JSON.stringify(t,null,2))})),t.generateAsync({type:"blob"}).then((function(e){var n=document.createElement("a");n.download="translate.zip",n.style.display="none",n.href=URL.createObjectURL(e),document.body.appendChild(n),n.click(),document.body.removeChild(n)}))}(o,j)}}),Object(a.jsx)(T.a,{defaultActiveKey:f,children:b.map((function(e){return Object(a.jsx)(P,{header:e.description||Object(a.jsx)("span",{className:"text-red-600 empty-content",children:"\u672a\u63d0\u4f9b\u63cf\u8ff0"}),children:Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{className:"translate-item",children:[Object(a.jsx)("span",{className:"translate-item-label",children:"en_US:"}),Object(a.jsx)("span",{className:"translate-item-value",children:e.locales[u]})]}),e.langs.map((function(n){return r&&e.locales[n]||s&&n!==s?null:Object(a.jsxs)("p",{className:"translate-item",children:[Object(a.jsxs)("span",{className:"translate-item-label",children:[n,":"]}),Object(a.jsx)("span",{className:"translate-item-value",children:Object(a.jsx)(z,{value:e.locales[n],onChange:function(t){return function(e,n,t){S.set({lang:n,hash:t},e)}(t,n,e.hash)}})})]},n)}))]})},e.hash)}))})}catch(x){return console.error(x),Object(a.jsx)("p",{className:"text-red-600 empty-content",children:"\u89e3\u6790\u6587\u4ef6\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u4e0a\u4f20\u7684zip\u6587\u4ef6\u662f\u5426\u6b63\u786e!"})}},J=function(){var e=Object(c.useRef)(),n=p().noEnLangs;return Object(a.jsxs)("div",{style:{minHeight:"calc(100vh - 64px)",paddingBottom:"84px"},children:[Object(a.jsx)(U,{actionRef:e}),Object(a.jsx)(E,{langs:n,onExport:function(){e.current.exportZip()}})]})};t(168),t(169);s.a.render(Object(a.jsx)(b,{children:Object(a.jsx)(J,{})}),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.02a4eab9.chunk.js.map